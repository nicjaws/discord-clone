"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=require("downshift"),r=e(require("match-sorter")),a=e(require("react-highlight-words")),l=e(require("react-use/lib/useDeepCompareEffect")),o=require("@chakra-ui/form-control"),i=require("@chakra-ui/layout"),s=require("@chakra-ui/button"),u=require("@chakra-ui/input"),c=require("@chakra-ui/icons"),p=require("@chakra-ui/tag");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return r(e,t,{keys:["value","label"]})}exports.CUIAutoComplete=function(e){var r=e.items,b=e.optionFilterFunc,h=void 0===b?m:b,d=e.itemRenderer,I=e.highlightItemBg,f=void 0===I?"gray.100":I,y=e.placeholder,x=e.label,C=e.listStyleProps,S=e.inputStyleProps,P=e.toggleButtonStyleProps,E=e.tagStyleProps,v=e.selectedIconProps,k=e.listItemStyleProps,O=e.onCreateItem,j=e.icon,B=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t.indexOf(n=l[r])>=0||(a[n]=e[n]);return a}(e,["items","optionFilterFunc","itemRenderer","highlightItemBg","placeholder","label","listStyleProps","labelStyleProps","inputStyleProps","toggleButtonStyleProps","tagStyleProps","selectedIconProps","listItemStyleProps","onCreateItem","icon"]),T=t.useState(!1),w=T[0],q=T[1],F=t.useState(""),L=F[0],R=F[1],V=t.useState(r),D=V[0],M=V[1],W=t.useRef(null),H=n.useMultipleSelection(B),K=H.getSelectedItemProps,_=H.getDropdownProps,A=H.addSelectedItem,U=H.removeSelectedItem,z=H.selectedItems,G=z.map((function(e){return e.value})),J=n.useCombobox({inputValue:L,selectedItem:void 0,items:D,onInputValueChange:function(e){var t=e.selectedItem,n=h(r,e.inputValue||"");w&&n.length>0&&q(!1),t||M(n)},stateReducer:function(e,t){var r=t.changes;switch(t.type){case n.useCombobox.stateChangeTypes.InputBlur:return g({},r,{isOpen:!1});case n.useCombobox.stateChangeTypes.InputKeyDownEnter:case n.useCombobox.stateChangeTypes.ItemClick:return g({},r,{highlightedIndex:e.highlightedIndex,inputValue:L,isOpen:!0});case n.useCombobox.stateChangeTypes.FunctionSelectItem:return g({},r,{inputValue:L});default:return r}},onStateChange:function(e){var t=e.inputValue,a=e.selectedItem;switch(e.type){case n.useCombobox.stateChangeTypes.InputChange:R(t||"");break;case n.useCombobox.stateChangeTypes.InputKeyDownEnter:case n.useCombobox.stateChangeTypes.ItemClick:a&&(G.includes(a.value)?U(a):O&&w?(O(a),q(!1),M(r),R("")):A(a),re(null))}}}),N=J.isOpen,Q=J.getToggleButtonProps,X=J.getLabelProps,Y=J.getMenuProps,Z=J.getInputProps,$=J.getComboboxProps,ee=J.highlightedIndex,te=J.getItemProps,ne=J.openMenu,re=J.selectItem,ae=J.setHighlightedIndex;return t.useEffect((function(){0===D.length&&(q(!0),M([{label:""+L,value:L}]),ae(0))}),[D,q,ae,L]),l((function(){M(r)}),[r]),t.createElement(i.Stack,null,t.createElement(o.FormLabel,Object.assign({},X({})),x),z&&t.createElement(i.Stack,{spacing:2,isInline:!0,flexWrap:"wrap"},z.map((function(e,n){return t.createElement(p.Tag,Object.assign({mb:1},E,{key:"selected-item-"+n},K({selectedItem:e,index:n})),t.createElement(p.TagLabel,null,e.label),t.createElement(p.TagCloseButton,{onClick:function(t){t.stopPropagation(),U(e)},"aria-label":"Remove menu selection badge"}))}))),t.createElement(i.Stack,Object.assign({isInline:!0},$()),t.createElement(u.Input,Object.assign({},S,Z(_({placeholder:y,onClick:N?function(){}:ne,onFocus:N?function(){}:ne,ref:W})))),t.createElement(s.Button,Object.assign({},P,Q(),{"aria-label":"toggle menu"})," ","â†“"," ")),t.createElement(i.Box,{pb:4,mb:4},t.createElement(i.List,Object.assign({bg:"white",borderRadius:"4px",border:N&&"1px solid rgba(0,0,0,0.1)",boxShadow:"6px 5px 8px rgba(0,50,30,0.02)"},C,Y()),N&&D.map((function(e,n){return t.createElement(i.ListItem,Object.assign({px:2,py:1,borderBottom:"1px solid rgba(0,0,0,0.01)"},k,{bg:ee===n?f:"inherit",key:""+e.value+n},te({item:e,index:n})),w?t.createElement(i.Text,null,t.createElement(i.Box,{as:"span"},"Create")," ",t.createElement(i.Box,{as:"span",bg:"yellow.300",fontWeight:"bold"},'"',e.label,'"')):t.createElement(i.Box,{display:"inline-flex",alignItems:"center"},G.includes(e.value)&&t.createElement(i.ListIcon,Object.assign({as:j||c.CheckCircleIcon,color:"green.500",role:"img",display:"inline","aria-label":"Selected"},v)),d?d(e):t.createElement(a,{autoEscape:!0,searchWords:[L||""],textToHighlight:(r=e,r.label)})));var r})))))};
//# sourceMappingURL=chakra-ui-autocomplete.cjs.production.min.js.map
